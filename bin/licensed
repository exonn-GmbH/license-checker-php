#!/usr/bin/env php
<?php declare(strict_types=1);

require __DIR__.'/../vendor/autoload.php';

use LicenseChecker\Commands\CheckLicenses;
use LicenseChecker\Commands\ListAllowedLicenses;
use LicenseChecker\Commands\ListUsedLicenses;
use LicenseChecker\Composer\LicenseParser;
use LicenseChecker\Composer\LicenseRetriever;
use LicenseChecker\Configuration\AllowedLicensesParser;
use Symfony\Component\Console\Application;

$application = new Application('License Checker', '0.0.1');

$checkLicenses = new CheckLicenses(
    new LicenseRetriever(),
    new LicenseParser(),
    new AllowedLicensesParser()
);
$application->add($checkLicenses);

$listUsedLicenses = new ListUsedLicenses(
    new LicenseRetriever(),
    new LicenseParser()
);
$application->add($listUsedLicenses);

$listAllowedLicenses = new ListAllowedLicenses(
    new AllowedLicensesParser()
);
$application->add($listAllowedLicenses);

$application->run();
